CREATE TABLE --PAISES
PAISES
(
ID_PAIS     INTEGER     NOT NULL,
NOMBRE      VARCHAR(50) NOT NULL,

CONSTRAINT  PK_PAIS PRIMARY KEY (ID_PAIS),
CONSTRAINT  UK_NOMB_PAIS UNIQUE (NOMBRE)
)
TABLESPACE "USERS"
;


CREATE TABLE --PERSONAS
PERSONAS
(
ID_PERSONA  INTEGER     NOT NULL,
NOMBRE      VARCHAR(50) NOT NULL,
APELLIDO    VARCHAR(50) NOT NULL,
FEC_NAC     DATE        NOT NULL,
DOCUMENTO   NUMBER      NOT NULL,
TELEFONO    NUMBER,
CORREO      VARCHAR(50) NOT NULL,
ID_PAIS     NUMBER,

CONSTRAINT PK_PERSONA PRIMARY KEY (ID_PERSONA),
CONSTRAINT UK_DOCU_PERSONA UNIQUE (DOCUMENTO),
CONSTRAINT FK_PAIS_PERSONA FOREIGN KEY (ID_PAIS) REFERENCES PAISES
)

TABLESPACE "USERS"
;

ALTER TABLE PERSONAS MODIFY TELEFONO VARCHAR(50); --Se altera tipo de dato de columna TELEFONO


CREATE TABLE --ESTUDIANTES
ESTUDIANTES
(
ID_ESTUDIANTE           INTEGER   NOT NULL,
ID_PERSONA              INTEGER   NOT NULL,
FEC_PRIMER_MATRICULA    DATE,
CANT_CURSOS_FINALIZADOS INTEGER,
FEC_REGISTRO            DATE      NOT NULL,

CONSTRAINT PK_ESTUDIANTE        PRIMARY KEY (ID_ESTUDIANTE),
CONSTRAINT UK_PERS_ESTUDIANTE   UNIQUE  (ID_PERSONA),
CONSTRAINT FK_PERS_ESTUDIANTE   FOREIGN KEY (ID_PERSONA) REFERENCES PERSONAS
)
TABLESPACE "USERS"
;

CREATE TABLE --DOCENTES
DOCENTES
(
ID_DOCENTE    INTEGER   NOT NULL,
ID_PERSONA    INTEGER   NOT NULL,
FEC_INGRESO   DATE      NOT NULL,
FEC_EGRESO    DATE,
FEC_REGISTRO  DATE      NOT NULL,

CONSTRAINT PK_DOCENTE PRIMARY KEY (ID_DOCENTE),
CONSTRAINT UK_PERS_DOCENTE UNIQUE (ID_PERSONA),
CONSTRAINT FK_PERS_DOCENTE FOREIGN KEY (ID_PERSONA) REFERENCES PERSONAS
)
TABLESPACE "USERS"
;

CREATE TABLE --CURSOS
CURSOS
(
ID_CURSO    INTEGER     NOT NULL,
ID_DOCENTE  INTEGER     NOT NULL,
ID_MATERIA  INTEGER     NOT NULL,
FEC_INICIO  DATE        NOT NULL,
FEC_FIN     DATE        NOT NULL,
MODALIDAD   VARCHAR(50) NOT NULL,

CONSTRAINT PK_CURSO             PRIMARY KEY (ID_CURSO),
CONSTRAINT FK_DOCENTE_CURSO     FOREIGN KEY (ID_DOCENTE) REFERENCES DOCENTES,
CONSTRAINT UK_DOCENTE_CURSO     UNIQUE  (ID_DOCENTE),
CONSTRAINT FK_MATERIA_CURSO     FOREIGN KEY (ID_MATERIA) REFERENCES MATERIAS,
CONSTRAINT UK_MATERIA_CURSO     UNIQUE  (ID_MATERIA),
CONSTRAINT UK_FEC_INICIO_CURSO  UNIQUE (FEC_INICIO)
)
TABLESPACE "USERS"
;

CREATE TABLE --MATERIAS
MATERIAS
(
ID_MATERIA  INTEGER     NOT NULL,
NOMBRE      VARCHAR(50) NOT NULL,

CONSTRAINT PK_MATERIA         PRIMARY KEY (ID_MATERIA),
CONSTRAINT UK_NOMBRE_MATERIA  UNIQUE (NOMBRE)
)
TABLESPACE "USERS"
;

CREATE TABLE --MATRÍCULAS
MATRICULAS
(
ID_MATRICULA  INTEGER   NOT NULL,
ID_CURSO      INTEGER   NOT NULL,
ID_ESTUDIANTE INTEGER   NOT NULL,
FEC_MATRICULA DATE      NOT NULL,
NOTA_FINAL    INTEGER,

CONSTRAINT PK_MATRICULA         PRIMARY KEY (ID_MATRICULA),
CONSTRAINT UK_CURSO_MATRICULA   UNIQUE (ID_CURSO),
CONSTRAINT FK_CURSO_MATRICULA   FOREIGN KEY (ID_CURSO) REFERENCES CURSOS,
CONSTRAINT UK_ESTUD_CURSO       UNIQUE (ID_ESTUDIANTE),
CONSTRAINT FK_ESTUD_CURSO       FOREIGN KEY (ID_ESTUDIANTE) REFERENCES ESTUDIANTES
)
TABLESPACE "USERS"
;